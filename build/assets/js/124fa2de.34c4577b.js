"use strict";(globalThis.webpackChunkrobotics_education_platform=globalThis.webpackChunkrobotics_education_platform||[]).push([[940],{1803(e,s,n){n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>a,default:()=>c,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"ros2-basics/examples/publisher-tutorial","title":"Publisher Tutorial","description":"In this tutorial, you\'ll create a ROS 2 publisher node that sends messages to a topic.","source":"@site/docs/ros2-basics/examples/publisher-tutorial.md","sourceDirName":"ros2-basics/examples","slug":"/ros2-basics/examples/publisher-tutorial","permalink":"/docs/ros2-basics/examples/publisher-tutorial","draft":false,"unlisted":false,"editUrl":"https://github.com/your-github-username/robotics-education-platform/edit/main/docs/ros2-basics/examples/publisher-tutorial.md","tags":[],"version":"current","lastUpdatedBy":"EishaFatima313","lastUpdatedAt":1771581246000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docs","previous":{"title":"ROS 2 Setup Guide","permalink":"/docs/ros2-basics/setup"},"next":{"title":"Subscriber Tutorial","permalink":"/docs/ros2-basics/examples/subscriber-tutorial"}}');var t=n(4848),i=n(8453);const l={sidebar_position:4},a="Publisher Tutorial",o={},d=[{value:"What You&#39;ll Build",id:"what-youll-build",level:2},{value:"Step 1: Create Your Package",id:"step-1-create-your-package",level:2},{value:"Step 2: Write the Publisher Code",id:"step-2-write-the-publisher-code",level:2},{value:"Step 3: Update setup.py",id:"step-3-update-setuppy",level:2},{value:"Step 4: Build the Package",id:"step-4-build-the-package",level:2},{value:"Step 5: Run the Publisher",id:"step-5-run-the-publisher",level:2},{value:"Step 6: Verify with ROS 2 CLI",id:"step-6-verify-with-ros-2-cli",level:2},{value:"Understanding the Code",id:"understanding-the-code",level:2},{value:"Key Components",id:"key-components",level:3},{value:"Common Message Types",id:"common-message-types",level:2},{value:"Try It: Modify the Publisher",id:"try-it-modify-the-publisher",level:2},{value:"Challenge 1: Change Publish Rate",id:"challenge-1-change-publish-rate",level:3},{value:"Challenge 2: Add a Counter",id:"challenge-2-add-a-counter",level:3},{value:"Challenge 3: Simulate Temperature Change",id:"challenge-3-simulate-temperature-change",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"What&#39;s Next?",id:"whats-next",level:2}];function h(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components},{Details:n}=s;return n||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"publisher-tutorial",children:"Publisher Tutorial"})}),"\n",(0,t.jsx)(s.p,{children:"In this tutorial, you'll create a ROS 2 publisher node that sends messages to a topic."}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"what-youll-build",children:"What You'll Build"}),"\n",(0,t.jsx)(s.p,{children:"A publisher node that simulates a temperature sensor, sending readings every second."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Temperature     \u2502         \u2502   Any Node       \u2502\n\u2502  Publisher       \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2192 \u2502   Listening to   \u2502\n\u2502                  \u2502  /temp  \u2502   /temp Topic    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"step-1-create-your-package",children:"Step 1: Create Your Package"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Navigate to your workspace src directory\ncd ~/ros2_ws/src\n\n# Create a Python package\nros2 pkg create --build-type ament_python temp_publisher\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"step-2-write-the-publisher-code",children:"Step 2: Write the Publisher Code"}),"\n",(0,t.jsxs)(s.p,{children:["Open ",(0,t.jsx)(s.code,{children:"temp_publisher/temp_publisher/temperature_sensor.py"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'# temperature_sensor.py\n# A ROS 2 node that publishes temperature sensor data\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float32\nimport random\n\nclass TemperatureSensor(Node):\n    """Publishes simulated temperature sensor data."""\n    \n    def __init__(self):\n        super().__init__(\'temperature_sensor\')\n        \n        # Create publisher\n        # Parameters: message type, topic name, queue size\n        self.publisher_ = self.create_publisher(\n            Float32, \n            \'/temperature\', \n            10\n        )\n        \n        # Create timer to publish every second\n        timer_period = 1.0  # seconds\n        self.timer = self.create_timer(\n            timer_period, \n            self.publish_temperature\n        )\n        \n        # Counter for simulation\n        self.base_temp = 25.0  # Base temperature in Celsius\n        \n        self.get_logger().info(\'Temperature Sensor Node Started\')\n        self.get_logger().info(\'Publishing to: /temperature\')\n        \n    def publish_temperature(self):\n        """Generate and publish a temperature reading."""\n        \n        # Create message\n        msg = Float32()\n        \n        # Simulate temperature with small random variation\n        variation = random.uniform(-0.5, 0.5)\n        msg.data = self.base_temp + variation\n        \n        # Publish the message\n        self.publisher_.publish(msg)\n        \n        # Log the published value\n        self.get_logger().info(f\'Published: {msg.data:.2f}\xb0C\')\n\ndef main(args=None):\n    """Entry point for the node."""\n    rclpy.init(args=args)\n    \n    # Create the node\n    temperature_sensor = TemperatureSensor()\n    \n    # Keep the node running\n    rclpy.spin(temperature_sensor)\n    \n    # Cleanup\n    temperature_sensor.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"step-3-update-setuppy",children:"Step 3: Update setup.py"}),"\n",(0,t.jsxs)(s.p,{children:["Edit ",(0,t.jsx)(s.code,{children:"temp_publisher/setup.py"})," to register the executable:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:"from setuptools import setup\n\npackage_name = 'temp_publisher'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    author='Your Name',\n    author_email='your.email@example.com',\n    description='Temperature sensor publisher tutorial',\n    license='MIT',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'temperature_sensor = temp_publisher.temperature_sensor:main',\n        ],\n    },\n)\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"step-4-build-the-package",children:"Step 4: Build the Package"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Navigate to workspace root\ncd ~/ros2_ws\n\n# Build\ncolcon build --packages-select temp_publisher\n\n# Source the workspace\nsource install/setup.bash\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"step-5-run-the-publisher",children:"Step 5: Run the Publisher"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Run the node\nros2 run temp_publisher temperature_sensor\n"})}),"\n",(0,t.jsx)(s.p,{children:"You should see output like:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"[INFO] [temperature_sensor]: Temperature Sensor Node Started\n[INFO] [temperature_sensor]: Publishing to: /temperature\n[INFO] [temperature_sensor]: Published: 25.23\xb0C\n[INFO] [temperature_sensor]: Published: 24.87\xb0C\n[INFO] [temperature_sensor]: Published: 25.41\xb0C\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"step-6-verify-with-ros-2-cli",children:"Step 6: Verify with ROS 2 CLI"}),"\n",(0,t.jsxs)(s.p,{children:["Open a ",(0,t.jsx)(s.strong,{children:"new terminal"})," and check the topic:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# List all topics\nros2 topic list\n\n# You should see /temperature\n\n# Get topic info\nros2 topic info /temperature\n\n# View the messages in real-time\nros2 topic echo /temperature\n"})}),"\n",(0,t.jsx)(s.p,{children:"Expected output:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"data: 25.234567\n---\ndata: 24.876543\n---\ndata: 25.412345\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"understanding-the-code",children:"Understanding the Code"}),"\n",(0,t.jsx)(s.h3,{id:"key-components",children:"Key Components"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:"# 1. Create the publisher\nself.publisher_ = self.create_publisher(\n    Float32,      # Message type\n    '/temperature', # Topic name\n    10            # Queue size (buffer)\n)\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:"# 2. Create a timer (calls function every X seconds)\nself.timer = self.create_timer(\n    1.0,                    # Period in seconds\n    self.publish_temperature # Function to call\n)\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:"# 3. Publish a message\nmsg = Float32()\nmsg.data = 25.5\nself.publisher_.publish(msg)\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"common-message-types",children:"Common Message Types"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Package"}),(0,t.jsx)(s.th,{children:"Use Case"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"std_msgs/msg/String"})}),(0,t.jsx)(s.td,{children:"Text messages"}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"std_msgs/msg/Float32"})}),(0,t.jsx)(s.td,{children:"Single number"}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"std_msgs/msg/Int32"})}),(0,t.jsx)(s.td,{children:"Integer"}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"std_msgs/msg/Bool"})}),(0,t.jsx)(s.td,{children:"True/False"}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"geometry_msgs/msg/Twist"})}),(0,t.jsx)(s.td,{children:"Velocity commands"}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"sensor_msgs/msg/Image"})}),(0,t.jsx)(s.td,{children:"Camera images"}),(0,t.jsx)(s.td,{})]})]})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"try-it-modify-the-publisher",children:"Try It: Modify the Publisher"}),"\n",(0,t.jsx)(s.h3,{id:"challenge-1-change-publish-rate",children:"Challenge 1: Change Publish Rate"}),"\n",(0,t.jsx)(s.p,{children:"Modify the timer to publish 10 times per second:"}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Solution"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:"timer_period = 0.1  # 0.1 seconds = 10 Hz\nself.timer = self.create_timer(timer_period, self.publish_temperature)\n"})})]}),"\n",(0,t.jsx)(s.h3,{id:"challenge-2-add-a-counter",children:"Challenge 2: Add a Counter"}),"\n",(0,t.jsx)(s.p,{children:"Add a message counter to track total publications:"}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Solution"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:"def __init__(self):\n    super().__init__('temperature_sensor')\n    self.publisher_ = self.create_publisher(Float32, '/temperature', 10)\n    self.timer = self.create_timer(1.0, self.publish_temperature)\n    self.base_temp = 25.0\n    self.counter = 0  # Add counter\n    \ndef publish_temperature(self):\n    msg = Float32()\n    self.counter += 1\n    variation = random.uniform(-0.5, 0.5)\n    msg.data = self.base_temp + variation\n    self.publisher_.publish(msg)\n    self.get_logger().info(f'Message #{self.counter}: {msg.data:.2f}\xb0C')\n"})})]}),"\n",(0,t.jsx)(s.h3,{id:"challenge-3-simulate-temperature-change",children:"Challenge 3: Simulate Temperature Change"}),"\n",(0,t.jsx)(s.p,{children:"Make the temperature gradually increase over time:"}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Solution"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:"def publish_temperature(self):\n    msg = Float32()\n    self.counter += 1\n    # Temperature increases by 0.1\xb0C every message\n    trend = self.counter * 0.1\n    variation = random.uniform(-0.5, 0.5)\n    msg.data = self.base_temp + trend + variation\n    self.publisher_.publish(msg)\n    self.get_logger().info(f'{msg.data:.2f}\xb0C')\n"})})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Problem"}),(0,t.jsx)(s.th,{children:"Solution"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"No output"}),(0,t.jsxs)(s.td,{children:["Check if node is running: ",(0,t.jsx)(s.code,{children:"ros2 node list"})]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Wrong topic"}),(0,t.jsxs)(s.td,{children:["List topics: ",(0,t.jsx)(s.code,{children:"ros2 topic list"})]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Import errors"}),(0,t.jsxs)(s.td,{children:["Source workspace: ",(0,t.jsx)(s.code,{children:"source install/setup.bash"})]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Permission denied"}),(0,t.jsxs)(s.td,{children:["Make script executable: ",(0,t.jsx)(s.code,{children:"chmod +x temperature_sensor.py"})]})]})]})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,t.jsxs)(s.p,{children:["Now that you have a publisher, let's create a ",(0,t.jsx)(s.a,{href:"/docs/ros2-basics/examples/subscriber-tutorial",children:"subscriber"})," to receive the data!"]})]})}function c(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453(e,s,n){n.d(s,{R:()=>l,x:()=>a});var r=n(6540);const t={},i=r.createContext(t);function l(e){const s=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);